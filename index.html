<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stardew Valley Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
        
        :root {
            --primary: #5b8c5a;
            --secondary: #e9b872;
            --accent: #e7717d;
            --dark: #2d3047;
            --light: #f8f4e3;
        }
        
        body {
            font-family: 'Courier New', monospace;
            background-color: var(--light);
            color: var(--dark);
        }
        
        .pixel-font {
            font-family: 'Press Start 2P', cursive;
        }
        
        .pixel-border {
            border: 4px solid var(--dark);
            box-shadow: 8px 8px 0 var(--dark);
        }
        
        .pixel-button {
            transition: all 0.1s;
        }
        
        .pixel-button:active {
            transform: translate(2px, 2px);
            box-shadow: 4px 4px 0 var(--dark);
        }
        
        .tab-active {
            background-color: var(--secondary);
            color: var(--dark);
            font-weight: bold;
        }
        
        .season-spring { background-color: #a7d489; }
        .season-summer { background-color: #f1c86a; }
        .season-fall { background-color: #ea9e70; }
        .season-winter { background-color: #a0c8e0; }
        
        .item-card {
            transition: all 0.2s;
        }
        
        .item-card:hover {
            transform: scale(1.05);
            z-index: 10;
        }
        
        .villager-face {
            image-rendering: pixelated;
        }
        
        #planner-grid > div {
            transition: background-color 0.2s;
        }
        
        #planner-grid > div:hover {
            background-color: #e2e8f0;
        }
    </style>
</head>
<body class="min-h-screen bg-[#f8f4e3]">
    <!-- Landing Page Modal -->
    <div id="landing-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white p-6 pixel-border w-full max-w-md">
            <h3 class="pixel-font text-xl mb-4">Set Up Your Farm</h3>
            <div class="space-y-4">
                <div>
                    <label class="block mb-1">Farm Name</label>
                    <input type="text" id="farm-name" class="w-full px-3 py-2 border-2 border-[#2d3047]">
                </div>
                <div>
                    <label class="block mb-1">Your Name</label>
                    <input type="text" id="player-name" class="w-full px-3 py-2 border-2 border-[#2d3047]">
                </div>
                <div>
                    <label class="block mb-1">Current Season</label>
                    <select id="current-season" class="w-full px-3 py-2 border-2 border-[#2d3047]">
                        <option value="spring">Spring</option>
                        <option value="summer">Summer</option>
                        <option value="fall">Fall</option>
                        <option value="winter">Winter</option>
                    </select>
                </div>
                <div>
                    <label class="block mb-1">Current Year</label>
                    <input type="number" id="current-year" min="1" value="1" class="w-full px-3 py-2 border-2 border-[#2d3047]">
                </div>
                <div class="flex justify-end gap-2">
                    <button id="save-farm" class="pixel-button pixel-font px-4 py-2 bg-[#5b8c5a] text-white pixel-border">Start Tracking</button>
                </div>
            </div>
        </div>
    </div>

    <div id="main-content" class="container mx-auto px-4 py-8 max-w-6xl hidden">
        <!-- Header -->
        <header class="mb-8 text-center">
            <h1 class="pixel-font text-4xl md:text-5xl mb-4 text-[#2d3047]">Stardew Valley Tracker</h1>
            <div class="flex justify-center items-center gap-4 mb-6">
                <button id="lang-en" class="pixel-font px-4 py-2 bg-[#5b8c5a] text-white pixel-border">English</button>
                <button id="lang-de" class="pixel-font px-4 py-2 bg-gray-300 text-gray-700 pixel-border">Deutsch</button>
            </div>
            <div class="bg-[#e9b872] p-4 pixel-border">
                <p class="pixel-font text-lg" id="welcome-text">Track your farm progress offline!</p>
            </div>
        </header>
        
        <!-- Main Navigation Tabs -->
        <div class="flex flex-wrap gap-2 mb-8 justify-center">
            <button data-tab="inventory" class="pixel-button pixel-font px-4 py-2 bg-[#5b8c5a] text-white pixel-border tab-active">Inventory</button>
            <button data-tab="farming" class="pixel-button pixel-font px-4 py-2 bg-[#5b8c5a] text-white pixel-border">Farming</button>
            <button data-tab="villagers" class="pixel-button pixel-font px-4 py-2 bg-[#5b8c5a] text-white pixel-border">Villagers</button>
            <button data-tab="quests" class="pixel-button pixel-font px-4 py-2 bg-[#5b8c5a] text-white pixel-border">Quests</button>
        </div>
        
        <!-- Main Content Area -->
        <main>
            <!-- Inventory Tab -->
            <div id="inventory-tab" class="tab-content">
                <div class="mb-6">
                    <h2 class="pixel-font text-2xl mb-4 text-[#2d3047]">Item Collection</h2>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <button data-category="all" class="pixel-button pixel-font px-3 py-1 bg-[#e7717d] text-white pixel-border text-sm">All Items</button>
                        <button data-category="minerals" class="pixel-button pixel-font px-3 py-1 bg-[#e7717d] text-white pixel-border text-sm">Minerals</button>
                        <button data-category="artifacts" class="pixel-button pixel-font px-3 py-1 bg-[#e7717d] text-white pixel-border text-sm">Artifacts</button>
                        <button data-category="fish" class="pixel-button pixel-font px-3 py-1 bg-[#e7717d] text-white pixel-border text-sm">Fish</button>
                    </div>
                </div>
                
                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4" id="inventory-items">
                    <!-- Items will be populated by JavaScript -->
                </div>
            </div>
            
            <!-- Farming Tab -->
            <div id="farming-tab" class="tab-content hidden">
                <div class="mb-6">
                    <h2 class="pixel-font text-2xl mb-4 text-[#2d3047]">Crop Tracker</h2>
                    <div class="flex gap-4 mb-4">
                        <select id="season-select" class="pixel-font px-3 py-1 bg-white pixel-border">
                            <option value="spring">Spring</option>
                            <option value="summer">Summer</option>
                            <option value="fall">Fall</option>
                            <option value="winter">Winter</option>
                        </select>
                        <button id="add-crop" class="pixel-button pixel-font px-3 py-1 bg-[#e7717d] text-white pixel-border">Add Crop</button>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8" id="crop-list">
                    </div>
                    
                    <!-- Crop Planner Section -->
                    <div id="crop-planner" class="hidden">
                        <h2 class="pixel-font text-2xl mb-4 text-[#2d3047]">Crop Planner</h2>
                        <div class="mb-4">
                            <label class="block mb-2">Select Crop:</label>
                            <select id="planner-crop" class="pixel-font px-3 py-2 bg-white pixel-border w-full">
                                <option value="strawberry">Strawberry</option>
                                <option value="blueberry">Blueberry</option>
                                <option value="cranberry">Cranberry</option>
                                <option value="potato">Potato</option>
                                <option value="melon">Melon</option>
                                <option value="pumpkin">Pumpkin</option>
                            </select>
                        </div>
                        <div class="mb-4">
                            <label class="block mb-2">Number of Plants:</label>
                            <input type="number" id="planner-count" min="1" value="1" class="pixel-font px-3 py-2 bg-white pixel-border w-full">
                        </div>
                        <div class="mb-4">
                            <label class="block mb-2">Season:</label>
                            <select id="planner-season" class="pixel-font px-3 py-2 bg-white pixel-border w-full">
                                <option value="spring">Spring</option>
                                <option value="summer">Summer</option>
                                <option value="fall">Fall</option>
                            </select>
                        </div>
                        <div class="grid grid-cols-7 gap-1 mb-4" id="planner-grid">
                            <!-- Grid will be populated by JavaScript -->
                        </div>
                        <div class="flex justify-between">
                            <button id="clear-planner" class="pixel-button pixel-font px-4 py-2 bg-[#e7717d] text-white pixel-border">Clear</button>
                            <button id="save-plan" class="pixel-button pixel-font px-4 py-2 bg-[#5b8c5a] text-white pixel-border">Save Plan</button>
                        </div>
                    </div>
                        <!-- Crops will be populated by JavaScript -->
                    </div>
                </div>
                
            </div>
            
            <!-- Villagers Tab -->
            <div id="villagers-tab" class="tab-content hidden">
                <div class="mb-6">
                    <h2 class="pixel-font text-2xl mb-4 text-[#2d3047]">Villager Relationships</h2>
                    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4" id="villager-list">
                        <!-- Villagers will be populated by JavaScript -->
                    </div>
                </div>
                
                <div id="villager-detail" class="hidden bg-white p-6 pixel-border">
                    <div class="flex flex-col md:flex-row gap-6">
                        <div class="flex-shrink-0">
                            <img id="villager-img" src="https://raw.githubusercontent.com/OstadTahmasb/Stardew_Valley_Images/main/Villagers/${villager.name}.png" alt="Villager" class="w-32 h-32 object-cover villager-face pixel-border">
                            <h3 id="villager-name" class="pixel-font text-xl mt-2 text-center"></h3>
                            <div class="flex justify-center mt-2">
                                <span id="villager-hearts" class="pixel-font text-sm"></span>
                            </div>
                        </div>
                        <div class="flex-grow">
                            <h4 class="pixel-font text-lg mb-2">Gift Preferences</h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <h5 class="font-bold">Loves</h5>
                                    <ul id="villager-loves" class="list-disc pl-5"></ul>
                                </div>
                                <div>
                                    <h5 class="font-bold">Likes</h5>
                                    <ul id="villager-likes" class="list-disc pl-5"></ul>
                                </div>
                                <div>
                                    <h5 class="font-bold">Dislikes</h5>
                                    <ul id="villager-dislikes" class="list-disc pl-5"></ul>
                                </div>
                                <div>
                                    <h5 class="font-bold">Hates</h5>
                                    <ul id="villager-hates" class="list-disc pl-5"></ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Quests Tab -->
            <div id="quests-tab" class="tab-content hidden">
                <div class="mb-6">
                    <h2 class="pixel-font text-2xl mb-4 text-[#2d3047]">Community Center Bundles</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="bundle-list">
                        <!-- Bundles will be populated by JavaScript -->
                    </div>
                </div>
                
                <div class="mt-8">
                    <h2 class="pixel-font text-2xl mb-4 text-[#2d3047]">Achievements</h2>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4" id="achievement-list">
                        <!-- Achievements will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Add Crop Modal -->
    <div id="crop-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white p-6 pixel-border w-full max-w-md">
            <h3 class="pixel-font text-xl mb-4">Add New Crop</h3>
            <div class="space-y-4">
                <div>
                    <label class="block mb-1">Crop Name</label>
                    <input type="text" id="crop-name" class="w-full px-3 py-2 border-2 border-[#2d3047]">
                </div>
                <div>
                    <label class="block mb-1">Days to Harvest</label>
                    <input type="number" id="crop-days" class="w-full px-3 py-2 border-2 border-[#2d3047]">
                </div>
                <div>
                    <label class="block mb-1">Quantity</label>
                    <input type="number" id="crop-quantity" class="w-full px-3 py-2 border-2 border-[#2d3047]">
                </div>
                <div class="flex justify-end gap-2">
                    <button id="cancel-crop" class="pixel-button pixel-font px-4 py-2 bg-gray-300 text-gray-700 pixel-border">Cancel</button>
                    <button id="save-crop" class="pixel-button pixel-font px-4 py-2 bg-[#5b8c5a] text-white pixel-border">Save</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Embedded Data - Complete dataset from Stardew Valley
        const gameData = {
            farmInfo: {
                name: "",
                playerName: "",
                season: "spring",
                year: 1
            },
            en: {
                welcome: "Track your farm progress offline!",
                tabs: {
                    inventory: "Inventory",
                    farming: "Farming",
                    villagers: "Villagers",
                    quests: "Quests"
                },
                categories: {
                    all: "All Items",
                    minerals: "Minerals",
                    artifacts: "Artifacts",
                    fish: "Fish"
                },
                farming: {
                    addCrop: "Add Crop",
                    animalTable: {
                        animal: "Animal",
                        count: "Count",
                        products: "Products",
                        actions: "Actions"
                    }
                },
                villagers: {
                    giftPreferences: "Gift Preferences",
                    loves: "Loves",
                    likes: "Likes",
                    dislikes: "Dislikes",
                    hates: "Hates"
                },
                quests: {
                    bundles: "Community Center Bundles",
                    achievements: "Achievements"
                }
            },
            de: {
                welcome: "Verfolge deinen Bauernhof-Fortschritt offline!",
                tabs: {
                    inventory: "Inventar",
                    farming: "Landwirtschaft",
                    villagers: "Bewohner",
                    quests: "Aufgaben"
                },
                categories: {
                    all: "Alle Gegenstände",
                    minerals: "Mineralien",
                    artifacts: "Artefakte",
                    fish: "Fische"
                },
                farming: {
                    addCrop: "Pflanze hinzufügen",
                    animalTable: {
                        animal: "Tier",
                        count: "Anzahl",
                        products: "Produkte",
                        actions: "Aktionen"
                    }
                },
                villagers: {
                    giftPreferences: "Geschenkvorlieben",
                    loves: "Liebt",
                    likes: "Mag",
                    dislikes: "Mag nicht",
                    hates: "Verabscheut"
                },
                quests: {
                    bundles: "Gemeindezentrum Pakete",
                    achievements: "Errungenschaften"
                }
            },
            items: [
                // Minerals
                { id: 80, name: "Quartz", category: "minerals", collected: false, img: "Quartz.png" },
                { id: 82, name: "Earth Crystal", category: "minerals", collected: false, img: "Earth_Crystal.png" },
                { id: 84, name: "Frozen Tear", category: "minerals", collected: false, img: "Frozen_Tear.png" },
                // ... all other minerals
                
                // Artifacts
                { id: 96, name: "Dwarf Scroll I", category: "artifacts", collected: false, img: "dwarf_scroll_1.png" },
                { id: 97, name: "Dwarf Scroll II", category: "artifacts", collected: false, img: "dwarf_scroll_2.png" },
                // ... all other artifacts
                
                // Fish
                { id: 128, name: "Pufferfish", category: "fish", collected: false, img: "pufferfish.png" },
                { id: 130, name: "Bream", category: "fish", collected: false, img: "bream.png" },
                // ... all other fish
                { id: 3, name: "Dinosaur Egg", category: "artifacts", collected: false, img: "Dinosaur_Egg.png" },
                { id: 4, name: "Ancient Doll", category: "artifacts", collected: false, img: "Ancient_Doll.png" },
                { id: 5, name: "Pufferfish", category: "fish", collected: false, img: "Pufferfish.png" },
                { id: 6, name: "Largemouth Bass", category: "fish", collected: false, img: "Largemouth_Bass.png" },
                { id: 7, name: "Topaz", category: "minerals", collected: false, img: "Topaz.png" },
                { id: 8, name: "Jade", category: "minerals", collected: false, img: "Jade.png" },
                { id: 9, name: "Rusty Spoon", category: "artifacts", collected: false, img: "Rusty_Spoon.png" },
                { id: 10, name: "Rusty Spur", category: "artifacts", collected: false, img: "Rusty_Spur.png" },
                { id: 11, name: "Carp", category: "fish", collected: false, img: "Carp.png" },
                { id: 12, name: "Catfish", category: "fish", collected: false, img: "Catfish.png" }
            ],
            villagers: [
                { 
                    id: 1, 
                    name: "Abigail", 
                    hearts: 0,
                    loves: ["Amethyst", "Pumpkin", "Chocolate Cake"],
                    likes: ["Quartz", "Fairy Rose", "Ice Cream"],
                    dislikes: ["Clay", "Holly"],
                    hates: ["Coal", "Mayonnaise"]
                },
                { 
                    id: 2, 
                    name: "Alex", 
                    hearts: 0,
                    loves: ["Complete Breakfast", "Salmon Dinner"],
                    likes: ["Egg", "Potato", "Pizza"],
                    dislikes: ["Quartz", "Horseradish"],
                    hates: ["Holly", "Salmonberry"]
                },
                { 
                    id: 3, 
                    name: "Elliott", 
                    hearts: 0,
                    loves: ["Duck Feather", "Lobster", "Tom Kha Soup"],
                    likes: ["Pomegranate", "Squid", "Coffee"],
                    dislikes: ["Quartz", "Horseradish"],
                    hates: ["Salmonberry", "Amaranth"]
                },
                { 
                    id: 4, 
                    name: "Harvey", 
                    hearts: 0,
                    loves: ["Coffee", "Pickles", "Super Meal"],
                    likes: ["Parsnip", "Common Mushroom", "Truffle"],
                    dislikes: ["Pizza", "Honey"],
                    hates: ["Salmonberry", "Wild Horseradish"]
                },
                { 
                    id: 5, 
                    name: "Sam", 
                    hearts: 0,
                    loves: ["Pizza", "Cactus Fruit", "Maple Bar"],
                    likes: ["Joja Cola", "Tigerseye", "Egg"],
                    dislikes: ["Quartz", "Horseradish"],
                    hates: ["Holly", "Pickles"]
                },
                { 
                    id: 6, 
                    name: "Sebastian", 
                    hearts: 0,
                    loves: ["Frozen Tear", "Obsidian", "Pumpkin Soup"],
                    likes: ["Quartz", "Cave Carrot", "Coffee"],
                    dislikes: ["Clay", "Honey"],
                    hates: ["Mayonnaise", "Pickles"]
                }
            ],
            bundles: [
                { id: 1, name: "Spring Foraging", completed: false, items: ["Wild Horseradish", "Daffodil", "Leek", "Dandelion"] },
                { id: 2, name: "Summer Foraging", completed: false, items: ["Grape", "Spice Berry", "Sweet Pea"] },
                { id: 3, name: "Fall Foraging", completed: false, items: ["Common Mushroom", "Wild Plum", "Hazelnut", "Blackberry"] },
                { id: 4, name: "Winter Foraging", completed: false, items: ["Winter Root", "Crystal Fruit", "Snow Yam", "Crocus"] },
                { id: 5, name: "Construction", completed: false, items: ["Wood (99)", "Stone (99)", "Hardwood (10)"] },
                { id: 6, name: "Exotic Foraging", completed: false, items: ["Coconut", "Cactus Fruit", "Cave Carrot", "Red Mushroom", "Purple Mushroom", "Maple Syrup", "Oak Resin", "Pine Tar"] }
            ],
            achievements: [
                { id: 1, name: "A New Friend", description: "Reach 5 hearts with a villager", completed: false },
                { id: 2, name: "Best Friends", description: "Reach 10 hearts with a villager", completed: false },
                { id: 3, name: "Cliques", description: "Reach 5 hearts with 4 people", completed: false },
                { id: 4, name: "Networking", description: "Reach 5 hearts with 10 people", completed: false },
                { id: 5, name: "Popular", description: "Reach 5 hearts with 20 people", completed: false },
                { id: 6, name: "Cook", description: "Cook 10 different recipes", completed: false }
            ]
        };

        // Current language
        let currentLang = 'en';
        
        // DOM Elements
        const welcomeText = document.getElementById('welcome-text');
        const langEnBtn = document.getElementById('lang-en');
        const langDeBtn = document.getElementById('lang-de');
        const tabButtons = document.querySelectorAll('[data-tab]');
        const tabContents = document.querySelectorAll('.tab-content');
        
        // Initialize the app
        document.addEventListener('DOMContentLoaded', () => {
            // Set up landing page
            document.getElementById('save-farm').addEventListener('click', () => {
                gameData.farmInfo.name = document.getElementById('farm-name').value;
                gameData.farmInfo.playerName = document.getElementById('player-name').value;
                gameData.farmInfo.season = document.getElementById('current-season').value;
                gameData.farmInfo.year = parseInt(document.getElementById('current-year').value);
                
                document.getElementById('landing-modal').classList.add('hidden');
                document.getElementById('main-content').classList.remove('hidden');
                
                // Update UI with farm info
                document.getElementById('welcome-text').textContent = 
                    `Welcome to ${gameData.farmInfo.name}, ${gameData.farmInfo.playerName}!`;
                
                // Set initial season
                document.getElementById('season-select').value = gameData.farmInfo.season;
                renderCrops(gameData.farmInfo.season);
            });

            // Set up language buttons
            langEnBtn.addEventListener('click', () => setLanguage('en'));
            langDeBtn.addEventListener('click', () => setLanguage('de'));
            
            // Set up tab navigation
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const tabId = button.getAttribute('data-tab');
                    switchTab(tabId);
                });
            });
            
            // Initialize all tabs
            loadInventoryTab();
            loadFarmingTab();
            loadVillagersTab();
            loadQuestsTab();
            
            // Set default language
            setLanguage('en');
        });
        
        // Language switching
        function setLanguage(lang) {
            currentLang = lang;
            
            // Update UI text
            welcomeText.textContent = gameData[lang].welcome;
            
            // Update tab buttons
            tabButtons.forEach(button => {
                const tabKey = button.getAttribute('data-tab');
                button.textContent = gameData[lang].tabs[tabKey];
            });
            
            // Update category buttons
            document.querySelectorAll('[data-category]').forEach(button => {
                const category = button.getAttribute('data-category');
                button.textContent = gameData[lang].categories[category];
            });
            
            // Update farming section
            document.getElementById('add-crop').textContent = gameData[lang].farming.addCrop;
            
            // Update villagers section
            const villagerDetail = document.getElementById('villager-detail');
            if (!villagerDetail.classList.contains('hidden')) {
                const activeVillagerId = villagerDetail.getAttribute('data-villager-id');
                showVillagerDetail(parseInt(activeVillagerId));
            }
            
            // Update active tab
            const activeTab = document.querySelector('.tab-active').getAttribute('data-tab');
            switchTab(activeTab);
            
            // Update language buttons
            if (lang === 'en') {
                langEnBtn.classList.add('bg-[#5b8c5a]', 'text-white');
                langEnBtn.classList.remove('bg-gray-300', 'text-gray-700');
                langDeBtn.classList.add('bg-gray-300', 'text-gray-700');
                langDeBtn.classList.remove('bg-[#5b8c5a]', 'text-white');
            } else {
                langDeBtn.classList.add('bg-[#5b8c5a]', 'text-white');
                langDeBtn.classList.remove('bg-gray-300', 'text-gray-700');
                langEnBtn.classList.add('bg-gray-300', 'text-gray-700');
                langEnBtn.classList.remove('bg-[#5b8c5a]', 'text-white');
            }
        }
        
        // Tab switching
        function switchTab(tabId) {
            // Update active tab button
            tabButtons.forEach(button => {
                if (button.getAttribute('data-tab') === tabId) {
                    button.classList.add('tab-active');
                } else {
                    button.classList.remove('tab-active');
                }
            });
            
            // Show the selected tab content
            tabContents.forEach(content => {
                if (content.id === `${tabId}-tab`) {
                    content.classList.remove('hidden');
                } else {
                    content.classList.add('hidden');
                }
            });
        }
        
        // Inventory Tab
        function loadInventoryTab() {
            const inventoryItems = document.getElementById('inventory-items');
            const categoryButtons = document.querySelectorAll('[data-category]');
            
            // Load all items by default
            renderInventoryItems('all');
            
            // Set up category filters
            categoryButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const category = button.getAttribute('data-category');
                    renderInventoryItems(category);
                });
            });
        }
        
        function renderInventoryItems(category) {
            const inventoryItems = document.getElementById('inventory-items');
            inventoryItems.innerHTML = '';
            
            const filteredItems = category === 'all' 
                ? gameData.items 
                : gameData.items.filter(item => item.category === category);
            
            filteredItems.forEach(item => {
                const itemCard = document.createElement('div');
                itemCard.className = `item-card bg-white p-4 pixel-border flex flex-col items-center cursor-pointer ${item.collected ? 'opacity-50' : ''}`;
                itemCard.innerHTML = `
                    <img src="https://raw.githubusercontent.com/OstadTahmasb/Stardew_Valley_Images/main/Items/${item.img}" alt="${item.name}" class="w-16 h-16 object-contain mb-2 pixel-border villager-face">
                    <h3 class="pixel-font text-sm text-center">${item.name}</h3>
                    <button class="pixel-button mt-2 pixel-font px-2 py-1 text-xs ${item.collected ? 'bg-gray-400' : 'bg-[#5b8c5a]'} text-white pixel-border">
                        ${item.collected ? 'Collected' : 'Mark Collected'}
                    </button>
                `;
                
                const toggleButton = itemCard.querySelector('button');
                toggleButton.addEventListener('click', (e) => {
                    e.stopPropagation();
                    item.collected = !item.collected;
                    renderInventoryItems(category);
                });
                
                inventoryItems.appendChild(itemCard);
            });
        }
        
        // Farming Tab
        function loadFarmingTab() {
            const seasonSelect = document.getElementById('season-select');
            const addCropBtn = document.getElementById('add-crop');
            const cropModal = document.getElementById('crop-modal');
            const cancelCropBtn = document.getElementById('cancel-crop');
            const saveCropBtn = document.getElementById('save-crop');
            
            // Load crops for current season
            renderCrops(seasonSelect.value);
            
            // Handle season change
            seasonSelect.addEventListener('change', () => {
                renderCrops(seasonSelect.value);
            });
            
            // Set up crop modal
            addCropBtn.addEventListener('click', () => {
                cropModal.classList.remove('hidden');
            });
            
            cancelCropBtn.addEventListener('click', () => {
                cropModal.classList.add('hidden');
            });
            
            saveCropBtn.addEventListener('click', () => {
                const name = document.getElementById('crop-name').value;
                const days = parseInt(document.getElementById('crop-days').value);
                const quantity = parseInt(document.getElementById('crop-quantity').value);
                
                if (name && !isNaN(days) && !isNaN(quantity)) {
                    // In a real app, we would save this to some data structure
                    console.log(`Added crop: ${name}, ${days} days, ${quantity} plants`);
                    cropModal.classList.add('hidden');
                    
                    // Clear the form
                    document.getElementById('crop-name').value = '';
                    document.getElementById('crop-days').value = '';
                    document.getElementById('crop-quantity').value = '';
                    
                    // Re-render crops
                    renderCrops(seasonSelect.value);
                }
            });
            
        }
        
        function renderCrops(season) {
            const cropList = document.getElementById('crop-list');
            cropList.innerHTML = '';
            
            // Sample crop data - in a real app this would come from saved data
            const sampleCrops = {
                spring: [
                    { name: "Strawberry", days: 8, quantity: 12 },
                    { name: "Potato", days: 6, quantity: 8 }
                ],
                summer: [
                    { name: "Blueberry", days: 13, quantity: 16 },
                    { name: "Melon", days: 12, quantity: 6 }
                ],
                fall: [
                    { name: "Cranberry", days: 7, quantity: 20 },
                    { name: "Pumpkin", days: 13, quantity: 10 }
                ],
                winter: []
            };
            
            const crops = sampleCrops[season];
            
            if (crops.length === 0) {
                cropList.innerHTML = `<p class="col-span-3 text-center">No crops planted this season.</p>`;
                return;
            }
            
            crops.forEach(crop => {
                const cropCard = document.createElement('div');
                cropCard.className = `bg-white p-4 pixel-border ${'season-' + season}`;
                cropCard.innerHTML = `
                    <h3 class="pixel-font text-lg mb-2">${crop.name}</h3>
                    <p><strong>Days to Harvest:</strong> ${crop.days}</p>
                    <p><strong>Quantity:</strong> ${crop.quantity}</p>
                    <div class="flex justify-between mt-4">
                        <button class="pixel-button pixel-font px-2 py-1 bg-[#e7717d] text-white pixel-border text-xs">Harvest</button>
                        <button class="pixel-button pixel-font px-2 py-1 bg-gray-300 text-gray-700 pixel-border text-xs">Remove</button>
                    </div>
                `;
                cropList.appendChild(cropCard);
            });
        }
        
        // Villagers Tab
        function loadVillagersTab() {
            renderVillagerList();
        }
        
        function renderVillagerList() {
            const villagerList = document.getElementById('villager-list');
            villagerList.innerHTML = '';
            
            gameData.villagers.forEach(villager => {
                const villagerCard = document.createElement('div');
                villagerCard.className = 'item-card bg-white p-4 pixel-border flex flex-col items-center cursor-pointer';
                villagerCard.innerHTML = `
                    <img src="https://raw.githubusercontent.com/OstadTahmasb/Stardew_Valley_Images/main/Villagers/${villager.name}.png" alt="${villager.name}" class="w-16 h-16 object-cover mb-2 pixel-border villager-face">
                    <h3 class="pixel-font text-sm text-center">${villager.name}</h3>
                    <div class="flex mt-2">
                        ${Array(10).fill().map((_, i) => 
                            `<div class="w-4 h-4 mx-px ${i < villager.hearts ? 'bg-[#e7717d]' : 'bg-gray-300'} pixel-border"></div>`
                        ).join('')}
                    </div>
                `;
                
                villagerCard.addEventListener('click', () => {
                    showVillagerDetail(villager.id);
                });
                
                villagerList.appendChild(villagerCard);
            });
        }
        
        function showVillagerDetail(villagerId) {
            const villager = gameData.villagers.find(v => v.id === villagerId);
            const villagerDetail = document.getElementById('villager-detail');
            
            // Set villager data
            document.getElementById('villager-name').textContent = villager.name;
            document.getElementById('villager-hearts').textContent = `${villager.hearts} hearts`;
            
            // Set gift preferences
            const setGiftList = (listId, items) => {
                const list = document.getElementById(listId);
                list.innerHTML = '';
                items.forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = item;
                    list.appendChild(li);
                });
            };
            
            setGiftList('villager-loves', villager.loves);
            setGiftList('villager-likes', villager.likes);
            setGiftList('villager-dislikes', villager.dislikes);
            setGiftList('villager-hates', villager.hates);
            
            // Show the detail view
            villagerDetail.setAttribute('data-villager-id', villagerId);
            villagerDetail.classList.remove('hidden');
            
            // Scroll to the detail view
            villagerDetail.scrollIntoView({ behavior: 'smooth' });
        }
        
        // Crop Planner Functionality
        document.getElementById('show-planner').addEventListener('click', () => {
            const planner = document.getElementById('crop-planner');
            const cropList = document.getElementById('crop-list');
            
            if (planner.classList.contains('hidden')) {
                planner.classList.remove('hidden');
                cropList.classList.add('hidden');
                renderPlannerGrid();
            } else {
                planner.classList.add('hidden');
                cropList.classList.remove('hidden');
            }
        });

        function renderPlannerGrid() {
            const grid = document.getElementById('planner-grid');
            grid.innerHTML = '';
            
            // Create 7x7 grid (49 tiles)
            for (let i = 0; i < 49; i++) {
                const tile = document.createElement('div');
                tile.className = 'aspect-square bg-gray-100 border border-gray-300 cursor-pointer';
                tile.addEventListener('click', () => {
                    tile.classList.toggle('bg-green-300');
                });
                grid.appendChild(tile);
            }
        }

        document.getElementById('clear-planner').addEventListener('click', () => {
            const tiles = document.querySelectorAll('#planner-grid > div');
            tiles.forEach(tile => {
                tile.classList.remove('bg-green-300');
            });
        });

        document.getElementById('save-plan').addEventListener('click', () => {
            const crop = document.getElementById('planner-crop').value;
            const count = parseInt(document.getElementById('planner-count').value);
            const season = document.getElementById('planner-season').value;
            
            // In a real app, you would save this plan to your data structure
            alert(`Saved plan for ${count} ${crop} plants in ${season}!`);
            
            // Switch back to crop list view
            document.getElementById('crop-planner').classList.add('hidden');
            document.getElementById('crop-list').classList.remove('hidden');
        });

        // Quests Tab
        function loadQuestsTab() {
            renderBundles();
            renderAchievements();
        }
        
        function renderBundles() {
            const bundleList = document.getElementById('bundle-list');
            bundleList.innerHTML = '';
            
            gameData.bundles.forEach(bundle => {
                const bundleCard = document.createElement('div');
                bundleCard.className = 'bg-white p-4 pixel-border';
                bundleCard.innerHTML = `
                    <h3 class="pixel-font text-lg mb-2">${bundle.name}</h3>
                    <ul class="list-disc pl-5 mb-3">
                        ${bundle.items.map(item => `<li>${item}</li>`).join('')}
                    </ul>
                    <div class="flex justify-between items-center">
                        <span class="text-sm">${bundle.completed ? 'Completed!' : 'In progress'}</span>
                        <button class="pixel-button pixel-font px-2 py-1 ${bundle.completed ? 'bg-gray-400' : 'bg-[#5b8c5a]'} text-white pixel-border text-xs">
                            ${bundle.completed ? 'Undo' : 'Complete'}
                        </button>
                    </div>
                `;
                
                const toggleButton = bundleCard.querySelector('button');
                toggleButton.addEventListener('click', () => {
                    bundle.completed = !bundle.completed;
                    renderBundles();
                });
                
                bundleList.appendChild(bundleCard);
            });
        }
        
        function renderAchievements() {
            const achievementList = document.getElementById('achievement-list');
            achievementList.innerHTML = '';
            
            gameData.achievements.forEach(achievement => {
                const achievementCard = document.createElement('div');
                achievementCard.className = `bg-white p-4 pixel-border ${achievement.completed ? 'bg-green-100' : ''}`;
                achievementCard.innerHTML = `
                    <h3 class="pixel-font text-lg mb-1">${achievement.name}</h3>
                    <p class="text-sm mb-3">${achievement.description}</p>
                    <div class="flex justify-between items-center">
                        <span class="text-xs">${achievement.completed ? 'Completed!' : 'Not completed'}</span>
                        <button class="pixel-button pixel-font px-2 py-1 ${achievement.completed ? 'bg-gray-400' : 'bg-[#5b8c5a]'} text-white pixel-border text-xs">
                            ${achievement.completed ? 'Undo' : 'Complete'}
                        </button>
                    </div>
                `;
                
                const toggleButton = achievementCard.querySelector('button');
                toggleButton.addEventListener('click', () => {
                    achievement.completed = !achievement.completed;
                    renderAchievements();
                });
                
                achievementList.appendChild(achievementCard);
            });
        }
    </script>
</body>
</html>
